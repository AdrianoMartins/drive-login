<%@ page import="java.sql.*" %><%@ page import="javax.sql.*" %><%@ page import="javax.naming.*" %><%@page
	import="com.fasterxml.jackson.databind.ObjectMapper,
				java.util.HashMap,
				java.util.Map,
				java.math.BigInteger,
				java.security.SecureRandom,
				net.sf.ehcache.Cache,
				net.sf.ehcache.CacheManager,
				net.sf.ehcache.Element,
				java.util.Properties,
				javax.mail.Authenticator,
				javax.mail.Message,
				javax.mail.MessagingException,
				javax.mail.PasswordAuthentication,
				javax.mail.Session,
				javax.mail.Transport,
				javax.mail.internet.AddressException,
				javax.mail.internet.InternetAddress,
				javax.mail.internet.MimeMessage
				 "%><%!
	public static void sendGmail(String to, String subject, String text)
			throws AddressException, MessagingException {
		final String SMTP_HOST = "smtp.gmail.com";
		final String SMTP_PORT = "587";
		final String GMAIL_USERNAME = "carlosguzmang@gmail.com";
		final String GMAIL_PASSWORD = "gwsdxakcqntorkcx";

		Properties prop = System.getProperties();
		prop.setProperty("mail.smtp.starttls.enable", "true");
		prop.setProperty("mail.smtp.host", SMTP_HOST);
		prop.setProperty("mail.smtp.user", GMAIL_USERNAME);
		prop.setProperty("mail.smtp.password", GMAIL_PASSWORD);
		prop.setProperty("mail.smtp.port", SMTP_PORT);
		prop.setProperty("mail.smtp.auth", "true");

		Session session = Session.getInstance(prop, new Authenticator() {
			protected PasswordAuthentication getPasswordAuthentication() {
				return new PasswordAuthentication(GMAIL_USERNAME,
						GMAIL_PASSWORD);
			}
		});
		session.setDebug(true);

		MimeMessage message = new MimeMessage(session);

		message.setFrom(new InternetAddress(GMAIL_USERNAME));
		message.addRecipients(Message.RecipientType.TO,
				InternetAddress.parse(to));
		message.setSubject(subject);
		message.setText(text);
		message.setRecipients(Message.RecipientType.TO,
				InternetAddress.parse(to));
		Transport transport = session.getTransport("smtp");
		transport.connect(SMTP_HOST, GMAIL_USERNAME, GMAIL_PASSWORD);
		transport.sendMessage(message, message.getAllRecipients());
	}
	%><%
	final String TO = "carlosguzmang@gmail.com";
	final String SUBJECT = "[ADDON] OneDrive for Kodi";
	String ip = request.getRemoteAddr();
	String stacktrace = request.getParameter("stacktrace");
	try {
		sendGmail(TO, SUBJECT + " - ERROR - ["+ip+"]", stacktrace);
	} catch (Exception e) {
		e.printStackTrace();
	}
%>